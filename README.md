# AuraFlow for macOS

<p align="center">
  <img src="docs/bocchi.png" width="720" alt="AuraFlow UI preview" />
</p>

AuraFlow ‚Äî –∂–∏–≤—ã–µ –æ–±–æ–∏ –¥–ª—è macOS: –¥–µ–º–æ–Ω –Ω–∞ Python –∏ GUI –Ω–∞ AppKit + SwiftUI. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –±–µ–∑–¥–µ–π—Å—Ç–≤–∏–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å –≤–∏–¥–µ–æ, –∑–∞–¥–∞—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è, –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º–Ω—ã–µ –æ–±–æ–∏ –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–æ–º –¥–µ–º–æ–Ω–∞.

## üëã –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **–ì–æ—Ç–æ–≤—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫**: —Å–∫–∞—á–∞–π—Ç–µ `dist/AuraFlow.dmg`, —Å–º–æ–Ω—Ç–∏—Ä—É–π—Ç–µ –æ–±—Ä–∞–∑ –∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ `AuraFlow.app` –≤ `/Applications`.
- **–°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤**: –≤—ã–ø–æ–ª–Ω–∏—Ç–µ `./build_app.sh` ‚Äî –≤ `dist/` –ø–æ—è–≤—è—Ç—Å—è `.app`, `.zip` –∏ `.dmg`.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- `python/` ‚Äì –¥–µ–º–æ–Ω `wallpaper_daemon.py`, –º–µ–Ω–µ–¥–∂–µ—Ä `control.py`, –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ç–µ—Å—Ç—ã.
- `macOSApp/` ‚Äì SwiftUI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Swift Package) —Å Objective-C bridge `PythonBridge`.
- `build_app.sh` / `scripts/build_release.sh` ‚Äì —Å–±–æ—Ä–∫–∞ `.app`, —É–ø–∞–∫–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –¥–ª—è –¥–∏—Å—Ç—Ä–∏–±—É—Ü–∏–∏.

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –¥–µ–∫–æ—Ä–∞—Ü–∏—è –æ–∫–Ω–∞: —Å–∫—Ä—ã—Ç—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π title bar, –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å blur-—ç—Ñ—Ñ–µ–∫—Ç–æ–º.
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (–∫—Ä–∞—Å–Ω–∞—è/–∂—ë–ª—Ç–∞—è/–∑–µ–ª—ë–Ω–∞—è) –ø–æ–≤–µ—Ä—Ö –≤–∏–¥–µ–æ.
- –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–µ–æ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω —Å —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ–º —Å—Ç–æ—Ä–æ–Ω –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–∏—Å–ø–ª–µ—è.
- –í—ã–±–æ—Ä –≤–∏–¥–µ–æ—Ä–æ–ª–∏–∫–∞ –∏ –º–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–≤–æ–≥–æ –∫–∞–¥—Ä–∞ –∫–∞–∫ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –æ–±–æ–µ–≤ macOS.
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç—å—é –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è (0.25x ‚Äì 2x), –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–º–æ–Ω–∞, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ LaunchAgent.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- macOS 13+.
- Xcode 15+ (–¥–ª—è —Å–±–æ—Ä–∫–∏ Swift-–ø—Ä–æ–µ–∫—Ç–∞) –∏–ª–∏ Swift toolchain 5.9+.
- Python 3.9+ —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞–º–∏ PyObjC (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ GUI —á–µ—Ä–µ–∑ Objective-C bridge).

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (—Ä—É—á–Ω–æ–π –∑–∞–ø—É—Å–∫ Python-–¥–µ–º–æ–Ω–∞)
```bash
python3 -m venv .venv
source .venv/bin/activate
pip install -r python/requirements.txt
python3 python/control.py start --video /path/to/video.mp4 --speed 1.0
```

## –ì–æ—Ç–æ–≤—ã–π DMG
–°–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –≥–æ—Ç–æ–≤—ã–π —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫:

```bash
./build_app.sh
```

–í –∫–∞—Ç–∞–ª–æ–≥–µ `dist/` –æ–∫–∞–∂—É—Ç—Å—è:
- `AuraFlow.app` ‚Äî —Å–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ;
- `AuraFlow.zip` ‚Äî –∞—Ä—Ö–∏–≤, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–∞–∫–µ—Ç –ø–æ –ø–æ—á—Ç–µ;
- `AuraFlow.dmg` ‚Äî –æ–±—Ä–∞–∑ –¥–∏—Å–∫–∞ –¥–ª—è –∫–æ–Ω–µ—á–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

–ß—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏–∑ `.dmg`, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –æ–±—Ä–∞–∑, –ø–µ—Ä–µ—Ç–∞—â–∏—Ç—å `AuraFlow.app` –≤ –ø–∞–ø–∫—É `Applications` –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –µ–≥–æ (–ø—Ä–∏ –ø–µ—Ä–≤–æ–º —Å—Ç–∞—Ä—Ç–µ macOS –º–æ–∂–µ—Ç –∑–∞–ø—Ä–æ—Å–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞).

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –ø–µ—Ä–µ–¥ —Å–±–æ—Ä–∫–æ–π –ø–æ–ª–æ–∂–∏—Ç–µ –∏–∫–æ–Ω–∫—É `Resources/AppIcon.png` (768√ó768) –∏–ª–∏ –∑–∞—Ä–∞–Ω–µ–µ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–π `Resources/AppIcon.icns` ‚Äî —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–æ–º —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç `.icns`, –µ—Å–ª–∏ –µ—Å—Ç—å PNG.

## –ó–∞–ø—É—Å–∫ SwiftUI-–∫–ª–∏–µ–Ω—Ç–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤
```bash
cd macOSApp
swift run
```
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ UI —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Å–∫—Ä–∏–ø—Ç—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `python/`. –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—É—Ç—å —è–≤–Ω–æ:
```bash
PYTHON_CONTROL_PATH=/absolute/path/to/python/control.py swift run
```

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
–¢–µ—Å—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ Python –∏ Swift-—á–∞—Å—Ç–∏:
- `python/tests/` (`unittest`) ‚Äî –∑–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–µ–º–æ–Ω–∞, —Å–º–µ–Ω–∞ –≤–∏–¥–µ–æ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ–±–æ–µ–≤, –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫.
- `macOSApp/Tests/` (`XCTest`, –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ Xcode) ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π –¥–µ–∫–æ—Ä–∞—Ü–∏–∏ –æ–∫–Ω–∞ –∏ –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞.

–ó–∞–ø—É—Å–∫ Python-—Ç–µ—Å—Ç–æ–≤:
```bash
python3 -m unittest discover -s python/tests
```

–ó–∞–ø—É—Å–∫ Swift-—Ç–µ—Å—Ç–æ–≤ (—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π Xcode —Å XCTest):
```bash
cd macOSApp
swift test
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞
–í UI –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ ¬´–ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å–∏—Å—Ç–µ–º—ã¬ª –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ CLI:
```bash
python3 python/control.py set-autostart on
```
–ë—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω LaunchAgent `~/Library/LaunchAgents/com.example.auraflow.plist`.

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
- –õ–æ–≥–∏ –¥–µ–º–æ–Ω–∞: `~/Library/Application Support/AuraFlow/daemon.log`.
- PID-—Ñ–∞–π–ª: `~/Library/Application Support/AuraFlow/daemon.pid`.
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è: `~/Library/Application Support/AuraFlow/config.json`.
